<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Draft: Results2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="draft-results2_files/libs/clipboard/clipboard.min.js"></script>
<script src="draft-results2_files/libs/quarto-html/quarto.js"></script>
<script src="draft-results2_files/libs/quarto-html/popper.min.js"></script>
<script src="draft-results2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="draft-results2_files/libs/quarto-html/anchor.min.js"></script>
<link href="draft-results2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="draft-results2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="draft-results2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="draft-results2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="draft-results2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Draft: Results2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="results" class="level1">
<h1>Results</h1>
<p><strong>Tornadoes that form over water (also known as “Waterspouts”) in shark-infested waters, <em>that also</em> move inwards towards land, do not have the potential to carry sharks over towards mainland cities to cause a disruption similar to the movie ‘Sharknado’.</strong></p>
<p>When plotting the data for sharks and waterspouts, it is apparent that waterspouts are not a common occurrence ( at least in the past five years ). These waterspouts have not caused any major damage to property or crops, and no deaths or injuries have been recorded, they either do not possess the strength to do so and many of these waterspouts do not last longer than an hour. The most action that has happened has been an incident where a waterspout damaged two vehicles and a power line, causing $5000 in damages. But when compared to tornadoes, this is very minuscule (Figure 1). This clearly shows that tornadoes that form on water lack the power necessary to lift sharks. In a perfect world, the better way to compare power is to compare levels on the Tor F Scale. The scale that ranks how strong a tornado is from EF1 to EF5. However, waterspouts are not considered tornadoes and they do not have a power scale similar to tornadoes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(property_damage_summary, <span class="fu">aes</span>(<span class="at">x =</span> EVENT_TYPE, <span class="at">y =</span> Average_Property_Damage)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">labs</span>( <span class="at">title =</span> <span class="st">"Average Property Damage Caused by Tornadoes and Waterspouts 2020-2024"</span>, <span class="at">x =</span> <span class="st">"Event Type"</span>, <span class="at">y =</span> <span class="st">"Cost of Damage ($)"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Average%20Property%20Damage%20Caused%20by%20Tornadoes%20vs%20Waterspouts%20Chart-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Tornadoes that are strong enough to carry the weight of sharks do not typically form near the coasts.</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "White"        "Hammerhead"   "Blue"         "Killer Whale" "Unknown"     
 [6] "Blue*"        "Leopard"      "Sevengill"    "Salmon"       "Thresher"    </code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Estimated Names and Weights of Sharks in California Dataset</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Scientific Name</th>
<th style="text-align: left;">Common Name</th>
<th style="text-align: right;">Max Weight (lbs)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PRIONACE_GLAUCA</td>
<td style="text-align: left;">Blue</td>
<td style="text-align: right;">400</td>
</tr>
<tr class="even">
<td style="text-align: left;">SPHYRNA_MOKARRAN</td>
<td style="text-align: left;">Hammerhead</td>
<td style="text-align: right;">992</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ORCINUS_ORCA</td>
<td style="text-align: left;">Killer Whale</td>
<td style="text-align: right;">8800</td>
</tr>
<tr class="even">
<td style="text-align: left;">TRIAKIS_SEMIFASCIATA</td>
<td style="text-align: left;">Leopard</td>
<td style="text-align: right;">70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LAMNA_DITROPIS</td>
<td style="text-align: left;">Salmon</td>
<td style="text-align: right;">992</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOTORYNCHUS_CEPEDIANUS</td>
<td style="text-align: left;">Sevengill</td>
<td style="text-align: right;">1100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALOPIAS_VULPINUS</td>
<td style="text-align: left;">Thresher</td>
<td style="text-align: right;">1102</td>
</tr>
<tr class="even">
<td style="text-align: left;">UNKNOWN</td>
<td style="text-align: left;">Unknown</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARODON_CARCHARIAS</td>
<td style="text-align: left;">White</td>
<td style="text-align: right;">5000</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Estimated Names and Weights of Sharks in Gulf of Mexico and Altantic Dataset</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Scientific Name</th>
<th style="text-align: left;">Common Name</th>
<th style="text-align: right;">Max Weight (lbs)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ALOPIAS_VULPINUS</td>
<td style="text-align: left;">Common Thresher</td>
<td style="text-align: right;">1102.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_ACRONOTUS</td>
<td style="text-align: left;">Blacknose</td>
<td style="text-align: right;">39.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_ALTIMUS</td>
<td style="text-align: left;">Bignose</td>
<td style="text-align: right;">370.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_BREVIPINNA</td>
<td style="text-align: left;">Spinner</td>
<td style="text-align: right;">198.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_FALCIFORMIS</td>
<td style="text-align: left;">Silky</td>
<td style="text-align: right;">762.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_ISODON</td>
<td style="text-align: left;">Finetooth</td>
<td style="text-align: right;">30.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_LEUCAS</td>
<td style="text-align: left;">Bull</td>
<td style="text-align: right;">507.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_LIMBATUS</td>
<td style="text-align: left;">Blacktip</td>
<td style="text-align: right;">269.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_OBSCURUS</td>
<td style="text-align: left;">Dusky</td>
<td style="text-align: right;">762.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_PEREZII</td>
<td style="text-align: left;">Caribbean Reef</td>
<td style="text-align: right;">154.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_PLUMBEUS</td>
<td style="text-align: left;">Sandbar</td>
<td style="text-align: right;">257.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARCHARHINUS_POROSUS</td>
<td style="text-align: left;">Smalltail</td>
<td style="text-align: right;">19.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARCHARHINUS_SIGNATUS</td>
<td style="text-align: left;">Night</td>
<td style="text-align: right;">39.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTROPHORUS_GRANULOSUS</td>
<td style="text-align: left;">Gulper</td>
<td style="text-align: right;">24.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CENTROPHORUS_UYATO</td>
<td style="text-align: left;">Little Gulper</td>
<td style="text-align: right;">6.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">CIRRHIGALEUS_ASPER</td>
<td style="text-align: left;">Roughskin Spurdog</td>
<td style="text-align: right;">33.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GALEOCERDO_CUVIER</td>
<td style="text-align: left;">Tiger</td>
<td style="text-align: right;">1984.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">GINGLYMOSTOMA_CIRRATUM</td>
<td style="text-align: left;">Nurse</td>
<td style="text-align: right;">242.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEPTRANCHIAS_PERLO</td>
<td style="text-align: left;">Sharpnose Sevengill</td>
<td style="text-align: right;">44.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEXANCHUS_GRISEUS</td>
<td style="text-align: left;">Bluntnose Sixgill</td>
<td style="text-align: right;">2425.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEXANCHUS_NAKAMURAI</td>
<td style="text-align: left;">Bigeye Sixgill</td>
<td style="text-align: right;">352.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">MUSTELUS_CANIS</td>
<td style="text-align: left;">Dusky Smooth-hound</td>
<td style="text-align: right;">26.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MUSTELUS_NORRISI</td>
<td style="text-align: left;">Narrowfin Smooth-hound</td>
<td style="text-align: right;">15.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">MUSTELUS_SINUSMEXICANUS</td>
<td style="text-align: left;">Gulf Smooth-hound</td>
<td style="text-align: right;">22.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEGAPRION_BREVIROSTRIS</td>
<td style="text-align: left;">Lemon</td>
<td style="text-align: right;">403.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">RHIZOPRIONODON_TERRAENOVAE</td>
<td style="text-align: left;">Atlantic Sharpnose</td>
<td style="text-align: right;">9.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SCYLIORHINUS_RETIFER</td>
<td style="text-align: left;">Chain Catshark</td>
<td style="text-align: right;">3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">SPHYRNA_LEWINI</td>
<td style="text-align: left;">Scalloped Hammerhead</td>
<td style="text-align: right;">334.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SPHYRNA_MOKARRAN</td>
<td style="text-align: left;">Great Hammerhead</td>
<td style="text-align: right;">992.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">SPHYRNA_TIBURO</td>
<td style="text-align: left;">Bonnethead</td>
<td style="text-align: right;">22.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SQUALUS_ACANTHIAS</td>
<td style="text-align: left;">Spiny Dogfish</td>
<td style="text-align: right;">19.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">SQUALUS_CUBENSIS</td>
<td style="text-align: left;">Cuban Dogfish</td>
<td style="text-align: right;">15.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SQUALUS_MITSUKURII</td>
<td style="text-align: left;">Shortspine Spurdog</td>
<td style="text-align: right;">17.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">SQUATINA_DUMERIL</td>
<td style="text-align: left;">Atlantic Angel Shark</td>
<td style="text-align: right;">77.2</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Names and Estimated Weights of Sharks in Hawaii Shark Dataset</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Scientic Name</th>
<th style="text-align: left;">Common Name</th>
<th style="text-align: right;">Max Weight (lbs)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">GALEOCERDO_CUVIER</td>
<td style="text-align: left;">Tiger</td>
<td style="text-align: right;">1984.2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Waterspouts%20in%20the%20US-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Waterspouts%20in%20the%20US-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Waterspouts%20in%20the%20US-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Waterspouts%20in%20the%20US-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Tornadoes%20in%20the%20US-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Tornadoes%20in%20the%20US-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Tornadoes%20in%20the%20US-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Tornadoes%20in%20the%20US-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Path%20of%20Tornadoes%20in%20the%20US-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Observed Proportion of EF4 tornadoes: 0.0021 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Observed Percentage of EF4 tornadoes: 0.21 %</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Checking%20only%20coastal%20tornadoes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Checking%20only%20coastal%20tornadoes-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Checking%20only%20coastal%20tornadoes-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Checking%20only%20coastal%20tornadoes-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Checking%20only%20coastal%20tornadoes-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="draft-results2_files/figure-html/Bootstrap%20Sampling-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>One-tailed p-value: 0.08 </code></pre>
</div>
</div>
<p>Given these very specific conditions: sharks are swimming close to the surface of the ocean. An EF5 tornado is the only tornado would be needed to carry sharks such as the hammerhead, tiger, and white shark. Given that there is no EF5 tornado observed in the data and EF4 tornadoes are also known to launch cars a considerable distance, we can assume that EF4 tornadoes will become sharknados when formed near the coast.</p>
<p>Assuming each tornado is independent of each other, and there EF scales are identically distributed, meaning that the relationship between EF scale and location is random. A boostrap sample can be done to test that the probability of an EF4 tornado forming on the coast will happen at random, meaning that there is a chance that a tornado powerful enough to carry sharks (given the right conditions) will theoretically happen at random.</p>
<p>The observed proportion of EF4 tornadoes in our data is 0.0021 meaning, that in our observed sample, it is very unlikely for EF4 tornadoes to form near the coast. When bootstrapping, a bootstrapped observed proportion of EF4 tornadoes is 0.0083087. The tells us that the probability of our observation happening at random is very low, a p-value near 0 is observed from the bootstrapping.</p>
<p>We do not have enough evidence to say that these EF4 tornadoes appear on the coasts at random, so we must reject that idea and can confirm that it is not likely that tornadoes with the potential to cause shark-infested terror will be a threat people should be worried about in the future.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>